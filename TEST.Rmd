---
title: "TEST file for assignment 1"
author: "Chengyu Wang"
output: html_notebook
---

This is an [R Markdown](http://rmarkdown.rstudio.com) Notebook. When you execute code within the notebook, the results appear beneath the code. 

Try executing this chunk by clicking the *Run* button within the chunk or by placing your cursor inside it and pressing *Cmd+Shift+Enter*. 

```{r}
#Import Liverpool Shapefile
Liverpool <- read_shape("CDRC AHAH 2016/shapefiles/E08000012.shp")
#Import Liverpool AHAH Data
LiverpoolData <- read_csv("CDRC AHAH 2016/tables/E08000012.csv")

#Join the data 
LiverpoolAHAH <- Liverpool %>% left_join(LiverpoolData, by = c("lsoa11cd" = "lsoa11cd"))

#Import AADF data
AADF <- read_csv("Liverpool.csv")

#2830 2999

#Select the latest data
#AADF_2017 <- rownames(AADF[AADF$AADFYear== "2000",])
AADF_2017 <- AADF[2830:2999,c(1,2,3,4,5,6,9,10,27)]

# make the UTM cols spatial (X/Easting/lon, Y/Northing/lat)
AADF.SP <- st_as_sf(AADF_2017, coords = c("Easting", "Northing"), crs = 27700)

#Reproject the Liverpool shp
UKBNG <- "+init=epsg:27700"
#proj4string(Liverpool) <- CRS(UKBNG)
Liverpool <- Liverpool %>% st_transform(27700)
LiverpoolAHAH <- LiverpoolAHAH %>% st_transform(27700)


#Plot the data
tmap_mode("view")


tm_shape(LiverpoolAHAH) + 
  tm_fill("no2", n=5,style = "quantile", palette = "Reds",title = "Annual mean NO2 (Âµgm3)") +
  tm_shape(AADF.SP) + 
  tm_bubbles(size = "AllMotorVehicles", col = "AllMotorVehicles", palette = "Purples", scale= 0.9,alpha = 1,style = "quantile", legend.size.show = FALSE, title.col = "All motor-vehicles per day",border.alpha = 0.1) +
  tm_layout(legend.text.size = 1, legend.title.size = 1.1, frame = FALSE) +
#Add north arrow
tm_compass()
```


```{r}
AADF <- read.csv("London.csv")
```

Add a new chunk by clicking the *Insert Chunk* button on the toolbar or by pressing *Cmd+Option+I*.

When you save the notebook, an HTML file containing the code and output will be saved alongside it (click the *Preview* button or press *Cmd+Shift+K* to preview the HTML file). 

The preview shows you a rendered HTML copy of the contents of the editor. Consequently, unlike *Knit*, *Preview* does not run any R code chunks. Instead, the output of the chunk when it was last run in the editor is displayed.

